<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Opções do Monitor TCC</title>
  <style>
    body { font-family: sans-serif; padding: 1em; width: 300px; }
    #status { margin-top: 1em; color: green; font-weight: bold; }
  </style>
</head>
<body>
  <h3>Configuração do Identificador</h3>
  <p>Digite o identificador para esta máquina (Ex: PC01 ou o CPF do aluno).</p>
  
  <label for="identifier">Identificador:</label>
  <input type="text" id="identifier" size="30">
  
  <br/><br/>
  <button id="save">Salvar</button>
  <div id="status"></div>

  <script>
    const storage = browser.storage.local;

function saveOptions(e) {
  e.preventDefault();
  const identifierValue = document.querySelector("#identifier").value;
  storage.set({
    identifier: identifierValue
  }).then(() => {
    const status = document.querySelector("#status");
    status.textContent = "Salvo com sucesso!";
    setTimeout(() => {
      status.textContent = '';
    }, 1500);
  });
}

function restoreOptions() {
  storage.get("identifier").then((result) => {
    document.querySelector("#identifier").value = result.identifier || '';
  });
}

document.addEventListener("DOMContentLoaded", restoreOptions);
document.querySelector("#save").addEventListener("click", saveOptions);
  </script>
</body>
</html>